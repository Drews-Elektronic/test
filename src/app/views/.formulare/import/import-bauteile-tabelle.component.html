<br>
<div class="container-xl"> 
    <div class="row">
        <h3 class="col-auto"> My BOM hochladen 
            @if(bereit){
                ({{ selectedBauteile.data.length }}) 
            }
        </h3>

        @if(!neues_projekt){
            <form [formGroup]="form_baugruppename" class="col no_form_style">
                <div class="row">
                    <label
                        for="baugruppenname"
                        class="col-auto align-right"
                        style="
                            font-size: 18px;
                            font-weight: 700;
                        "
                    >Baugruppe Name</label>

                    <div class="col-auto">
                        <input 
                            id="baugruppenname"
                            name="baugruppenname"
                            type="text"
                            class="form-control form-select-sm" 
                            style="height: 35px;"
                            (change)="onBaugruppennameChange($event)"

                            [class.deaktiviere_valid_and_invalid_aussehen]="!weiter_clicked"
                            formControlName="baugruppenname"
                    
                            [matTooltipDisabled]="!weiter_clicked || form_baugruppename.get('baugruppenname')?.valid"
                            [matTooltip]="
                                ((form_baugruppename.controls['baugruppenname'].invalid && form_baugruppename.controls['baugruppenname'].errors?.['required']) 
                                        ? fehlermeldung_baugruppenname['required'] : undefined) 
                                    || 
                                ((form_baugruppename.controls['baugruppenname'].invalid && form_baugruppename.controls['baugruppenname'].errors?.['bgnrkd_existiert']) 
                                        ? fehlermeldung_baugruppenname['bgnrkd_existiert'] : undefined)
                            "
                        />
                    </div>
                </div>
            </form>
        }
    </div>

    @if(neues_projekt){
        <mpl-navigation [position]="1" [neues_projekt]="true"
        ></mpl-navigation>
    }
    <div class="sticky">
        <mpl-ladebalken [falsches_laden_beginnen]="!bereit"></mpl-ladebalken>

        <div class="row align-items-center">
            <div class="col-auto">
                <mpl-button-fileupload (callback)="import_konfiguration($event)" [bitte_warten]="bitte_warten_excel_hochladen"></mpl-button-fileupload>
            </div>

            <p-button
                class="col-auto" 
                [label]="bitte_warten_excel_hochladen ? 'Bitte warten ...' : 'Neues Bauteil anlegen'" 
                icon="pi pi-plus" 
                styleClass="prime_button_rounded"
                (click)="dialog_import_anlegen()"
                [disabled]="bitte_warten_excel_hochladen"
            />
        </div>

        <br>
        <!--
        <div class="row margin_right_0" style="gap: 7px">
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>

            <div class="col-2"></div>
            <div class="col-2"></div>

            @if(selectedBauteile.data.length > 0){
                <button
                    type="button"
                    class="btn btn-secondary col"
                    (click)="import_bauteil_loeschen()"
                    [disabled]="selection.selected.length === 0"
                >
                    @if (selection.selected.length === 0 || selection.selected.length === 1) {
                        Bauteil löschen
                    }@else if (selection.selected.length > 1 && selection.selected.length !== selectedBauteile.data.length) {
                        {{selection.selected.length}} Bauteile löschen
                    }@else{
                        Alles löschen
                    }
                </button>
            
                <button 
                    type="button"
                    class="btn btn-secondary col" 
                    (click)="dialog_import_anlegen()"
                >
                    Neues Bauteil anlegen
                </button>
            }@else {
                <div class="col"></div>
            }
        </div>
        -->
    </div>

    <!-- Suchfelder -->
    <div class="row">
        <!--
        <label
            for="filterAll"
            class="form-label col-1"
            >Suchen</label
        >
        <div class="col-2">
            <input
                name="filterAll"
                type="text"
                class="form-control form-select-sm"
                (keyup)="applyFilter($event)"
                [(ngModel)]="filterAll"
            />
        </div>
        -->
        <!--
        <button
            type="button"
            class="btn btn-secondary col"
            (click)="alles_pruefen()"
        >
            Daten Pr&uuml;fen
        </button>
        -->
        <div class="col"></div>

        
        
        <!-- Komprimierung Einstellungen -->
        <!-- Die Wechselbaren Kopfzeilen werden zurzeit nicht benötigt
        <div class="col-6">
            <mat-radio-group class="row" (change)="onRadioChange($event)">
                <mat-radio-button class="col" value="bt">           Bauteildaten </mat-radio-button>
                <mat-radio-button class="col" value="sl" checked #radiobutton_sl>   BOM-Daten  </mat-radio-button>
                <mat-radio-button class="col" value="slkomp">       Bom-Daten komprimiert  </mat-radio-button>
            </mat-radio-group>
        </div>
        -->
    </div>

    <br>

    @if(!bereit){
        <div style="
            display: flex;
            justify-content: center;
            align-items: center;
            height: 25vh;
            ">
                <mat-spinner></mat-spinner>
        </div>
    }@else{
        @if(selectedBauteile.data.length > 0){
            @if(bitte_warten_uebernehmen){
                <mpl-grosser-spinner
                    text="Ihre Daten werden in eine Baugruppe übernommen."
                ></mpl-grosser-spinner>
            }@else {
                <table mat-table
                    [dataSource]="selectedBauteile" matSort multiTemplateDataRows
                >
                    <ng-container matColumnDef="select">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-checkbox (change)="$event ? toggleAllRows() : null"
                                            [checked]="selection.hasValue() && isAllSelected()"
                                            [indeterminate]="selection.hasValue() && !isAllSelected()">
                            </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let row">
                            <mat-checkbox (click)="$event.stopPropagation()"
                                            (change)="$event ? selection.toggle(row) : null"
                                            [checked]="selection.isSelected(row)">
                            </mat-checkbox>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="bompos">
                        <th mat-header-cell *matHeaderCellDef> POS </th>
                        <td mat-cell *matCellDef="let element"> 
                            <div class="badge-medium">
                                <span class="badge rounded-pill text-bg-secondary ">
                                    {{element["bompos"]}} 
                                </span>
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="artnrdie">
                        <th mat-header-cell *matHeaderCellDef> MyProto Nr. </th>
                        <td mat-cell *matCellDef="let element"> {{element["artnrdie"]}} </td>
                    </ng-container>

                    <ng-container matColumnDef="btnrkd">
                        <th mat-header-cell *matHeaderCellDef> Bauteil Nr. </th>
                        <td mat-cell *matCellDef="let element"> {{element["btnrkd"]}} </td>
                    </ng-container>
                    <ng-container matColumnDef="btbeschreibungkd">
                        <th mat-header-cell *matHeaderCellDef> Bauteilbeschreibung </th>
                        <td mat-cell *matCellDef="let element"> {{element["btbeschreibungkd"]}} </td>
                    </ng-container>
                    <ng-container matColumnDef="htnrkd">
                        <th mat-header-cell *matHeaderCellDef> Hersteller-Teile Nr. </th>
                        <td mat-cell *matCellDef="let element"> {{element["htnrkd"]}} </td>
                    </ng-container>
                    <ng-container matColumnDef="anzprobg">
                        <th mat-header-cell *matHeaderCellDef> Anzahl pro BG </th>
                        <td mat-cell *matCellDef="let element"> {{element["anzprobg"]}} </td>
                    </ng-container>

                    <ng-container matColumnDef="linamekd">
                        <th mat-header-cell *matHeaderCellDef> Lieferanten </th>
                        <td mat-cell *matCellDef="let element"> {{element["linamekd"]}} </td>
                    </ng-container>
                    <ng-container matColumnDef="btnrlikd">
                        <th mat-header-cell *matHeaderCellDef> Lieferanten-BT-Nr. </th>
                        <td mat-cell *matCellDef="let element"> {{element["btnrlikd"]}} </td>
                    </ng-container>

                    <ng-container matColumnDef="agbskd">
                        <th mat-header-cell *matHeaderCellDef> BS </th>
                        <td mat-cell *matCellDef="let element"> 
                            <div style="font-size: 18px;">
                                @if(element['agbskd'] == Beistellung.BEISTELLUNG){
                                    <span class="badge rounded-pill text-bg-warning"> von ihnen Beigestellt </span>
                                }@else if (element['agbskd'] == Beistellung.BEISTELLUNG_DURCH_FEHLER) {
                                    <span class="badge rounded-pill text-bg-danger"> von ihnen Beigestellt </span>
                                }

                                @if(markieren.includes(element.binr)){
                                    <span class="badge rounded-pill text-bg-danger"> fehlende Daten</span>
                                }
                            </div>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="btbemerkungkd">
                        <th mat-header-cell *matHeaderCellDef>  </th>
                        <td mat-cell *matCellDef="let element">
                            <span> 
                                @if (element['btbemerkungkd']) {
                                    &#9733;
                                }@else {
                                    &minus;
                                }
                            </span> 
                        </td>
                    </ng-container>

                    <!-- Wird verwendet wenn Komprimiert im Radiobutton ausgewählt wird -->
                    <ng-container matColumnDef="anzprobgkomp">
                        <th mat-header-cell *matHeaderCellDef> komprimierte Anzahl pro BG </th>
                        <td mat-cell *matCellDef="let element"> {{element["anzprobgkomp"]}} </td>
                    </ng-container>
                    <ng-container matColumnDef="elbezkomp">
                        <th mat-header-cell *matHeaderCellDef> komprimierte Elektrische Bezeichnung</th>
                        <td mat-cell *matCellDef="let element"> {{element["elbezkomp"]}} </td>
                    </ng-container>

                    <!-- Löschen Knopf mit Mülltonnen Symbol -->
                    <ng-container matColumnDef="loeschen">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon 
                                class="clickable main_muelltonne_anpasssen"
                                (click)="import_bauteil_loeschen($event)"
                            >
                            
                                delete
                            </mat-icon>
                        </th>
                        <td mat-cell *matCellDef="let element"> 
                            <mat-icon 
                                class="clickable muelltonne_anpasssen"
                                (click)="import_bauteil_loeschen($event, element)"
                            >
                                delete
                            </mat-icon>
                        </td>
                    </ng-container>

                    <!-- Spalte mit dem Pfeil Symbol -->
                    <ng-container matColumnDef="expand">
                        <th mat-header-cell *matHeaderCellDef>
                            <span class="vertical_center_container">
                                <label
                                    for="filterAll"
                                    class=""
                                    ><mat-icon>search</mat-icon></label
                                >
                                <input
                                    id="filterAll"
                                    name="filterAll"
                                    type="text"
                                    class="form-control form-select-sm"
                                    (keyup)="applyFilter($event)"
                                    [(ngModel)]="filterAll"
                                    style="width: 100px;"
                                />
                            </span>
                        </th>
                        <td mat-cell *matCellDef="let element" style="text-align:right; width: 10px;">
                            <div (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()">
                                @if(expandedElement !== element){
                                    <mat-icon>keyboard_arrow_down</mat-icon>
                                }@else {
                                    <mat-icon>keyboard_arrow_up</mat-icon>
                                }
                            </div>
                        </td>
                    </ng-container>

                    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
                    <ng-container matColumnDef="expandedDetail" >
                        <td mat-cell 
                            *matCellDef="let element; let i = dataIndex" 
                            [attr.colspan]="selectedColoums.length"
                        >
                            <div class="element-detail " [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                                <form #ng_form="ngForm" #html_form>
                                    <div class="container-xxl box-anpassen">
                                        <h5 style="display: flex; justify-content: space-between;">
                                            <div style="display: inline-block; align-self: flex-end;"> Bauteildaten </div> 
                                            <button
                                                type="button"
                                                class="btn btn-secondary"
                                                style="padding-bottom: 0%; padding-left: 8px; padding-right: 8px;"
                                                (click)="expandedElement = undefined;"
                                            >
                                                <mat-icon>close</mat-icon>
                                            </button>
                                        </h5>

                                        <div class="row">
                                            <label
                                                for="btnrkd{{ i }}"
                                                class="form-label col-2"
                                                >Bauteilnummer</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="btnrkd{{ i }}"
                                                    name="btnrkd{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.btnrkd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['btnrkd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['btnrkd']"
                                                />
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="btbeschreibungkd{{ i }}"
                                                class="form-label col-2"
                                                >Bauteilbeschreibung</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="btbeschreibungkd{{ i }}"
                                                    name="btbeschreibungkd{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.btbeschreibungkd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['btbeschreibungkd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['btbeschreibungkd']"
                                                />
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="htnrkd{{ i }}"
                                                class="form-label col-2"
                                                >Hersteller-Teile Nr. </label
                                            >
                                            <div class="col">
                                                <input
                                                    id="htnrkd{{ i }}"
                                                    name="htnrkd{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.htnrkd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['htnrkd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['htnrkd']"
                                                />
                                            </div>

                                            <label 
                                                for="agbtkd{{ i }}" 
                                                class="form-label col-2 align-right"
                                                >Bauteilart</label
                                            >
                                            <div class="col">
                                                <select
                                                    id="agbtkd{{ i }}"
                                                    name="agbtkd{{ i }}"
                                                    type="text"
                                                    class="form-select form-select-sm"
                                                    [(ngModel)]="element.agbtkd"
                                                >
                                                    <option *ngFor="let x of agbtkd" [value]="x.value"> {{x.name}} </option>
                                                    <!-- [selected]="x?.standard" rausgenommen, durch [selected] wird der Wert der Variable im dropdown als default value verwende -->
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="htnhkd{{ i }}"
                                                class="form-label col-2"
                                                >Hersteller</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="htnhkd{{ i }}"
                                                    name="htnhkd{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.htnhkd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['htnhkd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['htnhkd']"
                                                />
                                            </div>

                                            <label 
                                                for="agbskd{{ i }}" 
                                                class="form-label col-2 align-right"
                                                >Beistellung</label
                                            >
                                            <div class="col">
                                                <select
                                                    id="agbskd{{ i }}"
                                                    name="agbskd{{ i }}"
                                                    type="text"
                                                    class="form-select form-select-sm"
                                                    [(ngModel)]="element.agbskd"
                                                >
                                                    <option *ngFor="let x of agbskd" [value]="x.value"> {{x.name}} </option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="SuchLieferant{{ i }}"
                                                class="form-label col-2"
                                                >Suche Lieferant</label
                                            >
                                            <div class="col">
                                                <select
                                                    id="SuchLieferant{{ i }}"
                                                    name="SuchLieferant{{ i }}"
                                                    class="form-select form-select-sm"
                                                    [(ngModel)]="element.linr"
                                                    (change)="lieferant_change($event, element)"
                                                >
                                                    <option [value]="undefined" selected>  </option>
                                                    <option *ngFor="let x of linamekd" [value]="x['LINR']"> {{x.LieferantKurz}} </option>
                                                </select>
                                            </div>

                                            <label 
                                                for="aglakd{{ i }}" 
                                                class="form-label col-2 align-right"
                                                >Lief.B.Auswahl</label
                                            >
                                            <div class="col">
                                                <select
                                                    id="aglakd{{ i }}"
                                                    name="aglakd{{ i }}"
                                                    class="form-select form-select-sm"
                                                    [(ngModel)]="element.aglakd"
                                                >
                                                    <option *ngFor="let x of aglakd" [value]="x.value"> {{x.name}} </option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label 
                                                for="btnrlikd{{ i }}" 
                                                class="form-label col-2"
                                                >Lieferanten-Teile Nr.</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="btnrlikd{{ i }}"
                                                    name="btnrlikd{{ i }}"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.btnrlikd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['btnrlikd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['btnrlikd']"
                                                >
                                            </div>

                                            <label 
                                                for="aghakd{{ i }}" 
                                                class="form-label col-2 align-right"
                                                >Herst.Auswahl</label
                                            >
                                            <div class="col">
                                                <select
                                                    id="aghakd{{ i }}"
                                                    name="aghakd{{ i }}"
                                                    class="form-select form-select-sm"
                                                    [(ngModel)]="element.aghakd"
                                                >
                                                    <option *ngFor="let x of aghakd" [value]="x.value"> {{x.name}} </option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label 
                                                for="linamekd{{ i }}" 
                                                class="form-label col-2"
                                                >Lieferant</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="linamekd{{ i }}"
                                                    name="linamekd{{ i }}"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.linamekd"
                                                    [class.invalid]="fehlermeldung?.[element.binr]?.['linamekd']"
                                                    [matTooltip]="fehlermeldung[element.binr]?.['linamekd']"
                                                >
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="btbemerkungkd{{ i }}"
                                                class="form-label col-2"
                                                >Bauteil-Bemerkungen</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="btbemerkungkd{{ i }}"
                                                    name="btbemerkungkd{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.btbemerkungkd"
                                                />
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label
                                                for="anlagezeitpunkt{{ i }}"
                                                class="form-label col-2"
                                                >Anlagezeitpunkt</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="anlagezeitpunkt{{ i }}"
                                                    name="anlagezeitpunkt{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.anlagezeitpunkt"
                                                    disabled
                                                />
                                            </div>

                                            <label
                                                for="LetzteAenderung{{ i }}"
                                                class="form-label col-2 align-right"
                                                >Letzte Änderung</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="LetzteAenderung{{ i }}"
                                                    name="LetzteAenderung{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.letzteaenderungzpkt"
                                                    disabled
                                                />
                                            </div>
                                        </div>

                                        <hr>
                                        <h5>BOM-Daten</h5>

                                        <div class="row">
                                            <label
                                                for="bompos{{ i }}"
                                                class="form-label col-2"
                                                >POS</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="bompos{{ i }}"
                                                    name="bompos{{ i }}"
                                                    type="text"
                                                    class="form-control form-select-sm kompakter-50 align-right"
                                                    [(ngModel)]="element.bompos"
                                                />
                                            </div>
                                            
                                            <div class="col-2 align-right">
                                                @if (!komprimiert) {
                                                    <label
                                                        for="anzprobg{{ i }}"
                                                        class="form-label"
                                                        >Anzahl pro BG</label
                                                    >
                                                }@else {
                                                    <label
                                                        for="anzprobgkomp{{ i }}"
                                                        class="form-label"
                                                        >Komprimierte Anzahl pro BG</label
                                                    >
                                                }
                                            </div>
                                            
                                            <div class="col">
                                                @if(!komprimiert){
                                                    <input
                                                        id="anzprobg{{ i }}"
                                                        name="anzprobg{{ i }}"
                                                        class="form-control form-select-sm kompakter-50 align-right"
                                                        [(ngModel)]="element.anzprobg"
                                                        [class.invalid]="fehlermeldung?.[element.binr]?.['anzprobgkomp']"
                                                        [matTooltip]="fehlermeldung?.[element.binr]?.['anzprobgkomp']"
                                                    />
                                                }@else {
                                                    <input
                                                        id="anzprobgkomp{{ i }}"
                                                        name="anzprobgkomp{{ i }}"
                                                        class="form-control form-select-sm kompakter-50 align-right"
                                                        [(ngModel)]="element.anzprobgkomp"
                                                    />
                                                }
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-2">
                                                @if(!komprimiert){
                                                    <label
                                                        for="elbezkomp{{ i }}"
                                                        class="form-label"
                                                        style="text-align: right;"
                                                        >Elektrische Bezeichnung</label
                                                    >
                                                }@else {
                                                    <label
                                                        for="elbez{{ i }}"
                                                        class="form-label"
                                                        style="text-align: right;"
                                                        >komprimierte Elektrische Bezeichnung</label
                                                    >
                                                }
                                            </div>

                                            <div class="col">
                                                @if (!komprimiert) {
                                                    <input
                                                        id="elbez{{ i }}"
                                                        name="elbez{{ i }}"
                                                        type="text"
                                                        class="form-control form-select-sm"
                                                        [(ngModel)]="element.elbez"
                                                        [class.invalid]="fehlermeldung?.[element.binr]?.['elbezkomp']"
                                                        [matTooltip]="fehlermeldung[element.binr]?.['elbezkomp']"
                                                    />
                                                }@else {
                                                    <input
                                                        id="elbezkomp{{ i }}"
                                                        name="elbezkomp{{ i }}"
                                                        type="text"
                                                        class="form-control form-select-sm"
                                                        [(ngModel)]="element.elbezkomp"
                                                        disabled
                                                    />
                                                }
                                            </div>
                                        </div>

                                        <div class="row">
                                            <label 
                                                class="col-2"
                                                for="slbemerkungkd" 
                                                class="form-label col-2"
                                                >BOM-Bemerkung</label
                                            >
                                            <div class="col">
                                                <input
                                                    id="slbemerkungkd"
                                                    name="slbemerkungkd"
                                                    type="text"
                                                    class="form-control form-select-sm"
                                                    [(ngModel)]="element.slbemerkungkd"
                                                />
                                            </div>
                                            
                                        </div>

                                        <div class="row m-2 border-success gap-1">
                                            <div class="col"></div>
            
                                            <div class="col-1"></div>
            
                                            <div class="col"></div>
                                            <div class="col"></div>
                                            
                                            <button
                                                class="btn btn-success col"
                                                (click)="Update(element)"
                                                [disabled]="bitte_warten_speichern"
                                            >
                                                @if(bitte_warten_speichern){
                                                    Bitte warten ...
                                                }@else {
                                                    Änderungen speichern
                                                }
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="selectedColoums" class="verkuerzen table-header sticky-table-header"></tr>
                    <tr mat-row *matRowDef="let element; columns: selectedColoums;"
                        class="element-row verkuerzen"
                        [class.expanded-row]="expandedElement === element"
                        (click)="expandedElement = expandedElement === element ? null : element">
                    </tr>
                    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
                </table>
            }
            
        }@else{
            <br>
            <br>
        }
    }

    <mat-paginator [length]="selectedBauteile.data.length"
        [pageSize]="25"
        [pageSizeOptions]="[5, 10, 25, selectedBauteile.data.length]"
        [ngClass]="{'verstecken': !bereit || bitte_warten_uebernehmen || selectedBauteile.data.length <= 0}">
    </mat-paginator>

    <br>

    <div [class.buttons-weiter-runter]="selectedBauteile.data.length === 0">
        @if(bereit && !bitte_warten_uebernehmen){
            <!-- Tabelle übernehmen oder Weiter Knopf -->
            <div class="row margin_left_0 margin_right_0" style="gap: 7px;">
                @if(neues_projekt){
                    <!--
                    <button 
                        class="btn btn-secondary col-2" 
                        (click)="zurueck()"
                    >
                        Zurück    
                    </button>
                    -->

                    <mpl-pfeil-links class="col-auto" (click_event)="zurueck()"></mpl-pfeil-links>
                }
                
                <div class="col"></div>

                @if(selectedBauteile.data.length > 0){
                    <!--
                    <button 
                        type="submit"
                        class="btn btn-success col-2" 
                        (click)="uebernehmen()"
                        [disabled]="bitte_warten_excel_hochladen || (weiter_clicked && form_baugruppename.invalid)"
                    >
                        @if(bitte_warten_uebernehmen){
                            Bitte warten ...
                        }@else {
                            @if(neues_projekt){
                                Weiter
                            }@else {
                                Übernehmen
                            }
                        }
                    </button>
                    -->

                    <mpl-pfeil-rechts 
                        class="col-auto" 
                        (click_event)="uebernehmen()"
                        [disabled]="bitte_warten_excel_hochladen || (weiter_clicked && form_baugruppename.invalid)"
                    ></mpl-pfeil-rechts>
                }

            </div>
            
            <br>
        }
    </div>
</div>